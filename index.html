<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D Space Mission: Earth to Mars</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            background-color: #000;
            color: #fff;
            overflow: hidden; /* Hide scrollbars if canvas is too big */
        }
        #simulationContainer {
            position: relative;
            width: 800px; /* Canvas width */
            height: 600px; /* Canvas height */
            border: 1px solid #555;
        }
        canvas {
            display: block;
            background-color: #080818;
        }
        #uiPanel {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #444;
            font-size: 14px;
        }
        #uiPanel p {
            margin: 5px 0;
        }
        button {
            background-color: #306090;
            color: white;
            border: none;
            padding: 8px 12px;
            margin-top: 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        #messages {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0,0,0,0.8);
            color: #0f0; /* Green for messages */
            padding: 8px;
            border-radius: 4px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>2D Space Mission: Earth to Mars</h1>
    <div id="simulationContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="uiPanel">
            <p>Rocket Status: <span id="rocketStatus">Idle</span></p>
            <p>Fuel: <span id="fuelDisplay">1000</span> units</p>
            <p>Speed: <span id="speedDisplay">0</span> km/s</p>
            <p>Distance to Mars: <span id="distMarsDisplay">-</span> km</p>
            <p>Game Time: <span id="gameTimeDisplay">0</span> days</p>
            <button id="launchButton">Prepare for Launch</button>
            <button id="resetButton">Reset Simulation</button>
        </div>
        <div id="messages">
            <span id="launchWindowMessage">Planetary alignment unfavorable.</span>
        </div>
    </div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const planets = [
    { name: "Mercury", orbitRadius: 0.39 * AU, period: 88, color: "#aaa", radius: 3 },
    { name: "Venus", orbitRadius: 0.72 * AU, period: 225, color: "#f5c542", radius: 4 },
    { name: "Earth", orbitRadius: 1 * AU, period: 365.25, color: "blue", radius: 5 },
    { name: "Mars", orbitRadius: 1.52 * AU, period: 687, color: "red", radius: 4 },
    { name: "Jupiter", orbitRadius: 5.2 * AU, period: 4333, color: "#d2b48c", radius: 7 },
    { name: "Saturn", orbitRadius: 9.58 * AU, period: 10759, color: "#f5deb3", radius: 6 },
    { name: "Uranus", orbitRadius: 19.22 * AU, period: 30687, color: "#add8e6", radius: 5 },
    { name: "Neptune", orbitRadius: 30.05 * AU, period: 60190, color: "#4169e1", radius: 5 }
];

let sun, rocket, gameTime = 0, lastTimestamp = 0;

function initObjects() {
    sun = { x: SUN_X, y: SUN_Y, radius: 10, color: 'yellow' };

    planets.forEach(p => {
        p.angle = Math.random() * 2 * Math.PI;
        p.angularSpeed = (2 * Math.PI) / (p.period * 24 * 3600) * TIME_SCALE;
        p.x = SUN_X + p.orbitRadius * SCALE * Math.cos(p.angle);
        p.y = SUN_Y + p.orbitRadius * SCALE * Math.sin(p.angle);
    });

    rocket = {
        x: planets[2].x, y: planets[2].y, width: 6, height: 12, color: 'silver',
        angle: 0, speed: 0.5, fuel: 1000, active: true
    };
}

function update(dt) {
    planets.forEach(p => {
        p.angle += p.angularSpeed * dt;
        p.x = SUN_X + p.orbitRadius * SCALE * Math.cos(p.angle);
        p.y = SUN_Y + p.orbitRadius * SCALE * Math.sin(p.angle);
    });

    if (rocket.active && rocket.fuel > 0) {
        const dx = sun.x - rocket.x;
        const dy = sun.y - rocket.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        rocket.angle = Math.atan2(dy, dx);
        rocket.x += rocket.speed * Math.cos(rocket.angle);
        rocket.y += rocket.speed * Math.sin(rocket.angle);
        rocket.fuel -= 1;
    }
}

function drawRocket() {
    ctx.save();
    ctx.translate(rocket.x, rocket.y);
    ctx.rotate(rocket.angle + Math.PI / 2);
    ctx.fillStyle = rocket.color;
    ctx.beginPath();
    ctx.moveTo(0, -rocket.height);
    ctx.lineTo(-rocket.width / 2, rocket.height / 2);
    ctx.lineTo(rocket.width / 2, rocket.height / 2);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
}

function drawScene() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Sun
    ctx.beginPath();
    ctx.arc(sun.x, sun.y, sun.radius, 0, 2 * Math.PI);
    ctx.fillStyle = sun.color;
    ctx.fill();

    // Planets
    planets.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
        ctx.fillStyle = p.color;
        ctx.fill();
        ctx.font = "10px Arial";
        ctx.fillText(p.name, p.x + 5, p.y);
    });

    drawRocket();
}

function loop(timestamp) {
    if (!lastTimestamp) lastTimestamp = timestamp;
    const dt = (timestamp - lastTimestamp) / 1000; // in seconds
    lastTimestamp = timestamp;

    update(dt);
    drawScene();

    requestAnimationFrame(loop);
}

initObjects();
loop();
</script>
</body>
</html>
