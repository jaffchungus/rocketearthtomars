<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mars Rocket Launch Simulator</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      font-family: monospace;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
    }
    #hud {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.7);
      color: #0f0;
      padding: 15px;
      border-radius: 10px;
      font-size: 14px;
      line-height: 1.6;
    }
    #countdown {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      color: white;
      font-family: monospace;
      animation: pulse 1s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div id="hud">
    Status: <span id="status">Standing by</span><br>
    Altitude: <span id="alt">0</span> m<br>
    Speed: <span id="vel">0</span> m/s<br>
    Fuel: <span id="fuel">100</span>%<br>
    Stage: <span id="stage">1</span>
  </div>
  <div id="countdown">5</div>
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = innerWidth;
    canvas.height = innerHeight;

    const rocket = {
      x: canvas.width / 2,
      y: canvas.height - 120,
      width: 30,
      height: 90,
      velocityY: 0,
      acceleration: 0,
      fuel: 100,
      thrusting: false,
      stage: 1
    };

    let gravity = 0.15;
    let thrustPower = -0.4;
    let launched = false;
    let countdown = 5;
    const altEl = document.getElementById('alt');
    const velEl = document.getElementById('vel');
    const fuelEl = document.getElementById('fuel');
    const statusEl = document.getElementById('status');
    const stageEl = document.getElementById('stage');
    const countdownEl = document.getElementById('countdown');

    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp') rocket.thrusting = true;
    });
    window.addEventListener('keyup', e => {
      if (e.key === 'ArrowUp') rocket.thrusting = false;
    });

    function drawSky() {
      const space = Math.min(rocket.y / canvas.height, 1);
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, `rgb(${0},${0},${50 + space * 100})`);
      gradient.addColorStop(1, `rgb(0,0,${space * 255})`);
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function drawRocket() {
      ctx.fillStyle = '#CCC';
      ctx.fillRect(rocket.x - rocket.width / 2, rocket.y, rocket.width, rocket.height);
      ctx.beginPath();
      ctx.moveTo(rocket.x - rocket.width / 2, rocket.y);
      ctx.lineTo(rocket.x, rocket.y - 20);
      ctx.lineTo(rocket.x + rocket.width / 2, rocket.y);
      ctx.closePath();
      ctx.fillStyle = '#999';
      ctx.fill();

      if (rocket.thrusting && rocket.fuel > 0) {
        ctx.beginPath();
        ctx.moveTo(rocket.x, rocket.y + rocket.height);
        ctx.lineTo(rocket.x - 10, rocket.y + rocket.height + Math.random() * 30 + 10);
        ctx.lineTo(rocket.x + 10, rocket.y + rocket.height + Math.random() * 30 + 10);
        ctx.closePath();
        ctx.fillStyle = `rgb(255, ${Math.random()*200}, 0)`;
        ctx.fill();
      }
    }

    function updateRocket() {
      if (rocket.thrusting && rocket.fuel > 0) {
        rocket.acceleration = thrustPower;
        rocket.fuel -= 0.15;
        statusEl.textContent = "Thrusting";
      } else {
        rocket.acceleration = 0;
        statusEl.textContent = rocket.y < canvas.height - 120 ? "Freefall" : "Idle";
      }

      rocket.velocityY += gravity + rocket.acceleration;
      rocket.y += rocket.velocityY;

      if (rocket.y > canvas.height - 120) {
        rocket.y = canvas.height - 120;
        rocket.velocityY = 0;
      }

      if (rocket.y < 200 && rocket.stage === 1) {
        rocket.stage = 2;
        thrustPower = -0.3;
        gravity = 0.1;
        rocket.fuel = 80;
        statusEl.textContent = "Stage 2 Activated!";
        stageEl.textContent = rocket.stage;
      }

      altEl.textContent = Math.max(0, Math.floor(canvas.height - rocket.y));
      velEl.textContent = rocket.velocityY.toFixed(2);
      fuelEl.textContent = Math.max(0, rocket.fuel.toFixed(0));
    }

    function animate() {
      drawSky();
      updateRocket();
      drawRocket();
      requestAnimationFrame(animate);
    }

    function beginCountdown() {
      countdownEl.textContent = countdown;
      const timer = setInterval(() => {
        countdown--;
        if (countdown > 0) {
          countdownEl.textContent = countdown;
        } else {
          clearInterval(timer);
          countdownEl.textContent = "ðŸš€";
          setTimeout(() => countdownEl.style.display = "none", 1000);
          launched = true;
          statusEl.textContent = "Liftoff";
          animate();
        }
      }, 1000);
    }

    beginCountdown();
  </script>
</body>
</html>
